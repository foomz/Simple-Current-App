import{a as q,t as H}from"../chunks/BMnbli4l.js";import{i as oe}from"../chunks/EgJZWYrR.js";import{Q as _e,j as ce,k as I,m as Y,l as de,d as i,H as he,r as G,n as P,u as L,aa as F,p as ae,q as re,t as be,a8 as le,e as Q,ab as me,ac as pe,a7 as ge,ad as ye,I as Ee,R as ke,ae as te,a4 as xe,Y as Ae,af as Te,s as X,ag as Ie,i as we,ah as Me,ai as Se,a2 as Ce,aj as Ne,ak as Re,al as Oe,y as qe,am as Le,an as ne,K as De,L as R,M as He,c as w,P as N,N as M,O as T,ao as O,ap as z}from"../chunks/BYpcQS0P.js";import{a as $e,l as se,e as U,s as $}from"../chunks/D_MsXdVS.js";import{i as Fe,a as Ve}from"../chunks/DcAarShk.js";import{o as Ye}from"../chunks/BiL_0wiP.js";function J(e,a){return a}function Pe(e,a,r,t){for(var l=[],n=a.length,f=0;f<n;f++)pe(a[f].e,l,!0);var b=n>0&&l.length===0&&r!==null;if(b){var p=r.parentNode;ge(p),p.append(r),t.clear(),S(e,a[0].prev,a[n-1].next)}ye(l,()=>{for(var m=0;m<n;m++){var g=a[m];b||(t.delete(g.k),S(e,g.prev,g.next)),Ee(g.e,!b)}})}function W(e,a,r,t,l,n=null){var f=e,b={flags:a,items:new Map,first:null};{var p=e;f=I?Y(ke(p)):p.appendChild(_e())}I&&de();var m=null,g=!1,s=te(()=>{var h=r();return we(h)?h:h==null?[]:le(h)});ce(()=>{var h=i(s),v=h.length;if(g&&v===0)return;g=v===0;let u=!1;if(I){var y=f.data===he;y!==(v===0)&&(f=G(),Y(f),P(!1),u=!0)}if(I){for(var k=null,x,_=0;_<v;_++){if(L.nodeType===8&&L.data===xe){f=L,u=!0,P(!1);break}var E=h[_],c=t(E,_);x=ie(L,b,k,null,E,c,_,l,a,r),b.items.set(c,x),k=x}v>0&&Y(G())}if(!I){var d=Ae;Ue(h,b,f,l,a,(d.f&F)!==0,t,r)}n!==null&&(v===0?m?ae(m):m=re(()=>n(f)):m!==null&&be(m,()=>{m=null})),u&&P(!0),i(s)}),I&&(f=L)}function Ue(e,a,r,t,l,n,f,b){var p=e.length,m=a.items,g=a.first,s=g,h,v=null,u=[],y=[],k,x,_,E;for(E=0;E<p;E+=1){if(k=e[E],x=f(k,E),_=m.get(x),_===void 0){var c=s?s.e.nodes_start:r;v=ie(c,a,v,v===null?a.first:v.next,k,x,E,t,l,b),m.set(x,v),u=[],y=[],s=v.next;continue}if(Be(_,k,E),_.e.f&F&&ae(_.e),_!==s){if(h!==void 0&&h.has(_)){if(u.length<y.length){var d=y[0],o;v=d.prev;var A=u[0],C=u[u.length-1];for(o=0;o<u.length;o+=1)Z(u[o],d,r);for(o=0;o<y.length;o+=1)h.delete(y[o]);S(a,A.prev,C.next),S(a,v,A),S(a,C,d),s=d,v=C,E-=1,u=[],y=[]}else h.delete(_),Z(_,s,r),S(a,_.prev,_.next),S(a,_,v===null?a.first:v.next),S(a,v,_),v=_;continue}for(u=[],y=[];s!==null&&s.k!==x;)(n||!(s.e.f&F))&&(h??(h=new Set)).add(s),y.push(s),s=s.next;if(s===null)continue;_=s}u.push(_),v=_,s=_.next}if(s!==null||h!==void 0){for(var V=h===void 0?[]:le(h);s!==null;)(n||!(s.e.f&F))&&V.push(s),s=s.next;var fe=V.length;if(fe>0){var ue=p===0?r:null;Pe(a,V,ue,m)}}Q.first=a.first&&a.first.e,Q.last=v&&v.e}function Be(e,a,r,t){me(e.v,a),e.i=r}function ie(e,a,r,t,l,n,f,b,p,m){var g=(p&Me)!==0,s=(p&Se)===0,h=g?s?Te(l):X(l):l,v=p&Ie?X(f):f,u={i:v,v:h,k:n,a:null,e:null,prev:r,next:t};try{return u.e=re(()=>b(e,h,v,m),I),u.e.prev=r&&r.e,u.e.next=t&&t.e,r===null?a.first=u:(r.next=u,r.e.next=u.e),t!==null&&(t.prev=u,t.e.prev=u.e),u}finally{}}function Z(e,a,r){for(var t=e.next?e.next.e.nodes_start:r,l=a?a.e.nodes_start:r,n=e.e.nodes_start;n!==t;){var f=Ce(n);l.before(n),n=f}}function S(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}function Ke(e){if(I){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var t=e.value;j(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var l=e.checked;j(e,"checked",null),e.checked=l}}};e.__on_r=r,Ne(r),$e()}}function j(e,a,r,t){var l=e.__attributes??(e.__attributes={});I&&(l[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||l[a]!==(l[a]=r)&&(a==="style"&&"__styles"in e&&(e.__styles={}),a==="loading"&&(e[Re]=r),e.removeAttribute(a))}function Ge(e,a,r=a){var t=Oe();se(e,"input",l=>{var n=l?e.defaultValue:e.value;if(n=B(e)?K(n):n,r(n),t&&n!==(n=a())){var f=e.selectionStart,b=e.selectionEnd;e.value=n??"",b!==null&&(e.selectionStart=f,e.selectionEnd=Math.min(b,e.value.length))}}),(I&&e.defaultValue!==e.value||qe(a)==null&&e.value)&&r(B(e)?K(e.value):e.value),Le(()=>{var l=a();B(e)&&l===K(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function B(e){var a=e.type;return a==="number"||a==="range"}function K(e){return e===""?null:+e}function ve(e,a,r){if(e.multiple)return Xe(e,a);for(var t of e.options){var l=D(t);if(Fe(l,a)){t.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function Qe(e,a){ne(()=>{var r=new MutationObserver(()=>{var t=e.__value;ve(e,t)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function ee(e,a,r=a){var t=!0;se(e,"change",l=>{var n=l?"[selected]":":checked",f;if(e.multiple)f=[].map.call(e.querySelectorAll(n),D);else{var b=e.querySelector(n)??e.querySelector("option:not([disabled])");f=b&&D(b)}r(f)}),ne(()=>{var l=a();if(ve(e,l,t),t&&l===void 0){var n=e.querySelector(":checked");n!==null&&(l=D(n),r(l))}e.__value=l,t=!1}),Qe(e)}function Xe(e,a){for(var r of e.options)r.selected=~a.indexOf(D(r))}function D(e){return"__value"in e?e.__value:e.value}var ze=H("<option> </option>"),Je=H("<option> </option>"),We=H('<p class="error svelte-eiervl"> </p>'),Ze=H("<p> </p>"),je=H('<main class="svelte-eiervl"><h1>Currency Converter</h1> <label>Amount: <input type="number" class="svelte-eiervl"></label> <label>From: <select class="svelte-eiervl"></select></label> <label>To: <select class="svelte-eiervl"></select></label> <!></main>');function sa(e,a){De(a,!1);let r=O({}),t=O("USD"),l=O("EUR"),n=O(1),f=O(0),b=O("");async function p(){w(b,"");try{const o=await(await fetch(`/api/rates?base=${i(t)}`)).json();if(o.success)w(r,o.rates),m();else throw new Error(o.error||"Failed to fetch rates")}catch(c){console.error("Error fetching rates:",c),w(b,c.message)}}function m(){i(r)[i(l)]?w(f,i(n)*i(r)[i(l)]):w(f,0)}Ye(p),oe();var g=je(),s=N(M(g),2),h=N(M(s));Ke(h),T(s);var v=N(s,2),u=N(M(v));R(()=>{i(t),z(()=>{i(r)})}),W(u,5,()=>Object.keys(i(r)),J,(c,d)=>{var o=ze(),A={},C=M(o,!0);T(o),R(()=>{A!==(A=i(d))&&(o.value=(o.__value=i(d))==null?"":i(d)),$(C,i(d))}),q(c,o)}),T(u),T(v);var y=N(v,2),k=N(M(y));R(()=>{i(l),z(()=>{i(r)})}),W(k,5,()=>Object.keys(i(r)),J,(c,d)=>{var o=Je(),A={},C=M(o,!0);T(o),R(()=>{A!==(A=i(d))&&(o.value=(o.__value=i(d))==null?"":i(d)),$(C,i(d))}),q(c,o)}),T(k),T(y);var x=N(y,2);{var _=c=>{var d=We(),o=M(d);T(d),R(()=>$(o,`Error: ${i(b)??""}`)),q(c,d)},E=c=>{var d=Ze(),o=M(d);T(d),R(A=>$(o,`${i(n)??""} ${i(t)??""} = ${A??""} ${i(l)??""}`),[()=>i(f).toFixed(2)],te),q(c,d)};Ve(x,c=>{i(b)?c(_):c(E,!1)})}T(g),Ge(h,()=>i(n),c=>w(n,c)),U("input",h,m),ee(u,()=>i(t),c=>w(t,c)),U("change",u,p),ee(k,()=>i(l),c=>w(l,c)),U("change",k,m),q(e,g),He()}export{sa as component};
