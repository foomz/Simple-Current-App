import{a as q,t as H}from"../chunks/CaIDS6Xq.js";import{i as oe}from"../chunks/CHsNnbb7.js";import{Q as _e,b as ce,h as w,u as $,r as de,k as v,H as he,t as P,v as B,c as L,aa as V,w as ae,a as re,x as be,a8 as le,l as Q,ab as me,ac as pe,a7 as ge,ad as ye,d as Ee,R as ke,ae as te,a4 as xe,Y as Ae,af as Te,s as X,ag as we,q as Ie,ah as Me,ai as Se,a2 as Ce,aj as Ne,ak as Re,al as Oe,B as qe,am as Le,an as ne,K as De,L as R,M as He,i as I,P as N,N as M,O as T,ao as O,ap as z}from"../chunks/9J8meNSI.js";import{a as Fe,l as se,e as U,s as F}from"../chunks/DbgVVT9H.js";import{i as Ve,a as Ye}from"../chunks/DgB5UXHp.js";import{o as $e}from"../chunks/BuKjDoLH.js";function J(e,a){return a}function Be(e,a,r,t){for(var l=[],n=a.length,f=0;f<n;f++)pe(a[f].e,l,!0);var b=n>0&&l.length===0&&r!==null;if(b){var p=r.parentNode;ge(p),p.append(r),t.clear(),S(e,a[0].prev,a[n-1].next)}ye(l,()=>{for(var m=0;m<n;m++){var g=a[m];b||(t.delete(g.k),S(e,g.prev,g.next)),Ee(g.e,!b)}})}function W(e,a,r,t,l,n=null){var f=e,b={flags:a,items:new Map,first:null};{var p=e;f=w?$(ke(p)):p.appendChild(_e())}w&&de();var m=null,g=!1,s=te(()=>{var d=r();return Ie(d)?d:d==null?[]:le(d)});ce(()=>{var d=v(s),i=d.length;if(g&&i===0)return;g=i===0;let u=!1;if(w){var y=f.data===he;y!==(i===0)&&(f=P(),$(f),B(!1),u=!0)}if(w){for(var k=null,x,_=0;_<i;_++){if(L.nodeType===8&&L.data===xe){f=L,u=!0,B(!1);break}var E=d[_],c=t(E,_);x=ve(L,b,k,null,E,c,_,l,a,r),b.items.set(c,x),k=x}i>0&&$(P())}if(!w){var o=Ae;Ue(d,b,f,l,a,(o.f&V)!==0,t,r)}n!==null&&(i===0?m?ae(m):m=re(()=>n(f)):m!==null&&be(m,()=>{m=null})),u&&B(!0),v(s)}),w&&(f=L)}function Ue(e,a,r,t,l,n,f,b){var p=e.length,m=a.items,g=a.first,s=g,d,i=null,u=[],y=[],k,x,_,E;for(E=0;E<p;E+=1){if(k=e[E],x=f(k,E),_=m.get(x),_===void 0){var c=s?s.e.nodes_start:r;i=ve(c,a,i,i===null?a.first:i.next,k,x,E,t,l,b),m.set(x,i),u=[],y=[],s=i.next;continue}if(Ke(_,k,E),_.e.f&V&&ae(_.e),_!==s){if(d!==void 0&&d.has(_)){if(u.length<y.length){var o=y[0],h;i=o.prev;var A=u[0],C=u[u.length-1];for(h=0;h<u.length;h+=1)Z(u[h],o,r);for(h=0;h<y.length;h+=1)d.delete(y[h]);S(a,A.prev,C.next),S(a,i,A),S(a,C,o),s=o,i=C,E-=1,u=[],y=[]}else d.delete(_),Z(_,s,r),S(a,_.prev,_.next),S(a,_,i===null?a.first:i.next),S(a,i,_),i=_;continue}for(u=[],y=[];s!==null&&s.k!==x;)(n||!(s.e.f&V))&&(d??(d=new Set)).add(s),y.push(s),s=s.next;if(s===null)continue;_=s}u.push(_),i=_,s=_.next}if(s!==null||d!==void 0){for(var Y=d===void 0?[]:le(d);s!==null;)(n||!(s.e.f&V))&&Y.push(s),s=s.next;var fe=Y.length;if(fe>0){var ue=p===0?r:null;Be(a,Y,ue,m)}}Q.first=a.first&&a.first.e,Q.last=i&&i.e}function Ke(e,a,r,t){me(e.v,a),e.i=r}function ve(e,a,r,t,l,n,f,b,p,m){var g=(p&Me)!==0,s=(p&Se)===0,d=g?s?Te(l):X(l):l,i=p&we?X(f):f,u={i,v:d,k:n,a:null,e:null,prev:r,next:t};try{return u.e=re(()=>b(e,d,i,m),w),u.e.prev=r&&r.e,u.e.next=t&&t.e,r===null?a.first=u:(r.next=u,r.e.next=u.e),t!==null&&(t.prev=u,t.e.prev=u.e),u}finally{}}function Z(e,a,r){for(var t=e.next?e.next.e.nodes_start:r,l=a?a.e.nodes_start:r,n=e.e.nodes_start;n!==t;){var f=Ce(n);l.before(n),n=f}}function S(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}function Ge(e){if(w){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var t=e.value;j(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var l=e.checked;j(e,"checked",null),e.checked=l}}};e.__on_r=r,Ne(r),Fe()}}function j(e,a,r,t){var l=e.__attributes??(e.__attributes={});w&&(l[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||l[a]!==(l[a]=r)&&(a==="style"&&"__styles"in e&&(e.__styles={}),a==="loading"&&(e[Re]=r),e.removeAttribute(a))}function Pe(e,a,r=a){var t=Oe();se(e,"input",l=>{var n=l?e.defaultValue:e.value;if(n=K(e)?G(n):n,r(n),t&&n!==(n=a())){var f=e.selectionStart,b=e.selectionEnd;e.value=n??"",b!==null&&(e.selectionStart=f,e.selectionEnd=Math.min(b,e.value.length))}}),(w&&e.defaultValue!==e.value||qe(a)==null&&e.value)&&r(K(e)?G(e.value):e.value),Le(()=>{var l=a();K(e)&&l===G(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function K(e){var a=e.type;return a==="number"||a==="range"}function G(e){return e===""?null:+e}function ie(e,a,r){if(e.multiple)return Xe(e,a);for(var t of e.options){var l=D(t);if(Ve(l,a)){t.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function Qe(e,a){ne(()=>{var r=new MutationObserver(()=>{var t=e.__value;ie(e,t)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function ee(e,a,r=a){var t=!0;se(e,"change",l=>{var n=l?"[selected]":":checked",f;if(e.multiple)f=[].map.call(e.querySelectorAll(n),D);else{var b=e.querySelector(n)??e.querySelector("option:not([disabled])");f=b&&D(b)}r(f)}),ne(()=>{var l=a();if(ie(e,l,t),t&&l===void 0){var n=e.querySelector(":checked");n!==null&&(l=D(n),r(l))}e.__value=l,t=!1}),Qe(e)}function Xe(e,a){for(var r of e.options)r.selected=~a.indexOf(D(r))}function D(e){return"__value"in e?e.__value:e.value}var ze=H("<option> </option>"),Je=H("<option> </option>"),We=H('<p class="error svelte-eiervl"> </p>'),Ze=H("<p> </p>"),je=H('<main class="svelte-eiervl"><h1>Currency Converter</h1> <label>Amount: <input type="number" class="svelte-eiervl"></label> <label>From: <select class="svelte-eiervl"></select></label> <label>To: <select class="svelte-eiervl"></select></label> <!></main>');function sa(e,a){De(a,!1);let r=O({}),t=O("USD"),l=O("EUR"),n=O(1),f=O(0),b=O("");async function p(){I(b,"");try{const o=await(await fetch(`/api/rates?base=${v(t)}`)).json();if(o.success)I(r,o.rates),m();else throw new Error(o.error||"Failed to fetch rates")}catch(c){console.error("Error fetching rates:",c),I(b,c.message)}}function m(){v(r)[v(l)]?I(f,v(n)*v(r)[v(l)]):I(f,0)}$e(p),oe();var g=je(),s=N(M(g),2),d=N(M(s));Ge(d),T(s);var i=N(s,2),u=N(M(i));R(()=>{v(t),z(()=>{v(r)})}),W(u,5,()=>Object.keys(v(r)),J,(c,o)=>{var h=ze(),A={},C=M(h,!0);T(h),R(()=>{A!==(A=v(o))&&(h.value=(h.__value=v(o))==null?"":v(o)),F(C,v(o))}),q(c,h)}),T(u),T(i);var y=N(i,2),k=N(M(y));R(()=>{v(l),z(()=>{v(r)})}),W(k,5,()=>Object.keys(v(r)),J,(c,o)=>{var h=Je(),A={},C=M(h,!0);T(h),R(()=>{A!==(A=v(o))&&(h.value=(h.__value=v(o))==null?"":v(o)),F(C,v(o))}),q(c,h)}),T(k),T(y);var x=N(y,2);{var _=c=>{var o=We(),h=M(o);T(o),R(()=>F(h,`Error: ${v(b)??""}`)),q(c,o)},E=c=>{var o=Ze(),h=M(o);T(o),R(A=>F(h,`${v(n)??""} ${v(t)??""} = ${A??""} ${v(l)??""}`),[()=>v(f).toFixed(2)],te),q(c,o)};Ye(x,c=>{v(b)?c(_):c(E,!1)})}T(g),Pe(d,()=>v(n),c=>I(n,c)),U("input",d,m),ee(u,()=>v(t),c=>I(t,c)),U("change",u,p),ee(k,()=>v(l),c=>I(l,c)),U("change",k,m),q(e,g),He()}export{sa as component};
