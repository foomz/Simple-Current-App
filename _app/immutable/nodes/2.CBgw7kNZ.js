import{a as q,t as H}from"../chunks/BMnbli4l.js";import{i as oe}from"../chunks/EgJZWYrR.js";import{Q as _e,j as ce,k as I,m as $,l as de,d as i,H as he,r as P,n as U,u as L,aa as V,p as ae,q as re,t as me,a8 as le,e as Q,ab as be,ac as pe,a7 as ge,ad as ye,I as Ee,R as ke,ae as te,a4 as xe,Y as Ae,af as Te,s as X,ag as Ie,i as we,ah as Me,ai as Se,a2 as Ce,aj as Ne,ak as Re,al as Oe,y as qe,am as Le,an as ne,K as De,L as R,M as He,c as w,P as N,N as M,O as T,ao as O,ap as z}from"../chunks/BYpcQS0P.js";import{a as Fe,l as se,e as B,s as F}from"../chunks/D_MsXdVS.js";import{i as Ve,a as Ye}from"../chunks/DcAarShk.js";import{o as $e}from"../chunks/BiL_0wiP.js";function J(e,a){return a}function Ue(e,a,r,t){for(var l=[],n=a.length,f=0;f<n;f++)pe(a[f].e,l,!0);var m=n>0&&l.length===0&&r!==null;if(m){var p=r.parentNode;ge(p),p.append(r),t.clear(),S(e,a[0].prev,a[n-1].next)}ye(l,()=>{for(var b=0;b<n;b++){var g=a[b];m||(t.delete(g.k),S(e,g.prev,g.next)),Ee(g.e,!m)}})}function W(e,a,r,t,l,n=null){var f=e,m={flags:a,items:new Map,first:null};{var p=e;f=I?$(ke(p)):p.appendChild(_e())}I&&de();var b=null,g=!1,s=te(()=>{var d=r();return we(d)?d:d==null?[]:le(d)});ce(()=>{var d=i(s),v=d.length;if(g&&v===0)return;g=v===0;let u=!1;if(I){var y=f.data===he;y!==(v===0)&&(f=P(),$(f),U(!1),u=!0)}if(I){for(var k=null,x,_=0;_<v;_++){if(L.nodeType===8&&L.data===xe){f=L,u=!0,U(!1);break}var E=d[_],c=t(E,_);x=ie(L,m,k,null,E,c,_,l,a,r),m.items.set(c,x),k=x}v>0&&$(P())}if(!I){var o=Ae;Be(d,m,f,l,a,(o.f&V)!==0,t,r)}n!==null&&(v===0?b?ae(b):b=re(()=>n(f)):b!==null&&me(b,()=>{b=null})),u&&U(!0),i(s)}),I&&(f=L)}function Be(e,a,r,t,l,n,f,m){var p=e.length,b=a.items,g=a.first,s=g,d,v=null,u=[],y=[],k,x,_,E;for(E=0;E<p;E+=1){if(k=e[E],x=f(k,E),_=b.get(x),_===void 0){var c=s?s.e.nodes_start:r;v=ie(c,a,v,v===null?a.first:v.next,k,x,E,t,l,m),b.set(x,v),u=[],y=[],s=v.next;continue}if(Ke(_,k,E),_.e.f&V&&ae(_.e),_!==s){if(d!==void 0&&d.has(_)){if(u.length<y.length){var o=y[0],h;v=o.prev;var A=u[0],C=u[u.length-1];for(h=0;h<u.length;h+=1)Z(u[h],o,r);for(h=0;h<y.length;h+=1)d.delete(y[h]);S(a,A.prev,C.next),S(a,v,A),S(a,C,o),s=o,v=C,E-=1,u=[],y=[]}else d.delete(_),Z(_,s,r),S(a,_.prev,_.next),S(a,_,v===null?a.first:v.next),S(a,v,_),v=_;continue}for(u=[],y=[];s!==null&&s.k!==x;)(n||!(s.e.f&V))&&(d??(d=new Set)).add(s),y.push(s),s=s.next;if(s===null)continue;_=s}u.push(_),v=_,s=_.next}if(s!==null||d!==void 0){for(var Y=d===void 0?[]:le(d);s!==null;)(n||!(s.e.f&V))&&Y.push(s),s=s.next;var fe=Y.length;if(fe>0){var ue=p===0?r:null;Ue(a,Y,ue,b)}}Q.first=a.first&&a.first.e,Q.last=v&&v.e}function Ke(e,a,r,t){be(e.v,a),e.i=r}function ie(e,a,r,t,l,n,f,m,p,b){var g=(p&Me)!==0,s=(p&Se)===0,d=g?s?Te(l):X(l):l,v=p&Ie?X(f):f,u={i:v,v:d,k:n,a:null,e:null,prev:r,next:t};try{return u.e=re(()=>m(e,d,v,b),I),u.e.prev=r&&r.e,u.e.next=t&&t.e,r===null?a.first=u:(r.next=u,r.e.next=u.e),t!==null&&(t.prev=u,t.e.prev=u.e),u}finally{}}function Z(e,a,r){for(var t=e.next?e.next.e.nodes_start:r,l=a?a.e.nodes_start:r,n=e.e.nodes_start;n!==t;){var f=Ce(n);l.before(n),n=f}}function S(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}function Ge(e){if(I){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var t=e.value;j(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var l=e.checked;j(e,"checked",null),e.checked=l}}};e.__on_r=r,Ne(r),Fe()}}function j(e,a,r,t){var l=e.__attributes??(e.__attributes={});I&&(l[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||l[a]!==(l[a]=r)&&(a==="style"&&"__styles"in e&&(e.__styles={}),a==="loading"&&(e[Re]=r),e.removeAttribute(a))}function Pe(e,a,r=a){var t=Oe();se(e,"input",l=>{var n=l?e.defaultValue:e.value;if(n=K(e)?G(n):n,r(n),t&&n!==(n=a())){var f=e.selectionStart,m=e.selectionEnd;e.value=n??"",m!==null&&(e.selectionStart=f,e.selectionEnd=Math.min(m,e.value.length))}}),(I&&e.defaultValue!==e.value||qe(a)==null&&e.value)&&r(K(e)?G(e.value):e.value),Le(()=>{var l=a();K(e)&&l===G(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function K(e){var a=e.type;return a==="number"||a==="range"}function G(e){return e===""?null:+e}function ve(e,a,r){if(e.multiple)return Xe(e,a);for(var t of e.options){var l=D(t);if(Ve(l,a)){t.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function Qe(e,a){ne(()=>{var r=new MutationObserver(()=>{var t=e.__value;ve(e,t)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function ee(e,a,r=a){var t=!0;se(e,"change",l=>{var n=l?"[selected]":":checked",f;if(e.multiple)f=[].map.call(e.querySelectorAll(n),D);else{var m=e.querySelector(n)??e.querySelector("option:not([disabled])");f=m&&D(m)}r(f)}),ne(()=>{var l=a();if(ve(e,l,t),t&&l===void 0){var n=e.querySelector(":checked");n!==null&&(l=D(n),r(l))}e.__value=l,t=!1}),Qe(e)}function Xe(e,a){for(var r of e.options)r.selected=~a.indexOf(D(r))}function D(e){return"__value"in e?e.__value:e.value}var ze=H("<option> </option>"),Je=H("<option> </option>"),We=H('<p class="error svelte-eiervl"> </p>'),Ze=H("<p> </p>"),je=H('<main class="svelte-eiervl"><h1>Currency Converter</h1> <label>Amount: <input type="number" class="svelte-eiervl"></label> <label>From: <select class="svelte-eiervl"></select></label> <label>To: <select class="svelte-eiervl"></select></label> <!></main>');function sa(e,a){De(a,!1);let r=O({}),t=O("USD"),l=O("EUR"),n=O(1),f=O(0),m=O("");async function p(){w(m,"");try{const o=await(await fetch(`/api/rates?base=${i(t)}`)).json();if(o.success)w(r,o.rates),b();else throw new Error(o.error||"Failed to fetch rates")}catch(c){console.error("Error fetching rates:",c),w(m,c.message)}}function b(){i(r)[i(l)]?w(f,i(n)*i(r)[i(l)]):w(f,0)}$e(p),oe();var g=je(),s=N(M(g),2),d=N(M(s));Ge(d),T(s);var v=N(s,2),u=N(M(v));R(()=>{i(t),z(()=>{i(r)})}),W(u,5,()=>Object.keys(i(r)),J,(c,o)=>{var h=ze(),A={},C=M(h,!0);T(h),R(()=>{A!==(A=i(o))&&(h.value=(h.__value=i(o))==null?"":i(o)),F(C,i(o))}),q(c,h)}),T(u),T(v);var y=N(v,2),k=N(M(y));R(()=>{i(l),z(()=>{i(r)})}),W(k,5,()=>Object.keys(i(r)),J,(c,o)=>{var h=Je(),A={},C=M(h,!0);T(h),R(()=>{A!==(A=i(o))&&(h.value=(h.__value=i(o))==null?"":i(o)),F(C,i(o))}),q(c,h)}),T(k),T(y);var x=N(y,2);{var _=c=>{var o=We(),h=M(o);T(o),R(()=>F(h,`Error: ${i(m)??""}`)),q(c,o)},E=c=>{var o=Ze(),h=M(o);T(o),R(A=>F(h,`${i(n)??""} ${i(t)??""} = ${A??""} ${i(l)??""}`),[()=>i(f).toFixed(2)],te),q(c,o)};Ye(x,c=>{i(m)?c(_):c(E,!1)})}T(g),Pe(d,()=>i(n),c=>w(n,c)),B("input",d,b),ee(u,()=>i(t),c=>w(t,c)),B("change",u,p),ee(k,()=>i(l),c=>w(l,c)),B("change",k,b),q(e,g),He()}export{sa as component};
